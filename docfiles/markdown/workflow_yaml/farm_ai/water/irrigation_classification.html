<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>farm_ai/water/irrigation_classification &mdash; FarmVibes.AI  documentation</title>
      <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../../../_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../../../" id="documentation_options" src="../../../../../_static/documentation_options.js"></script>
        <script src="../../../../../_static/doctools.js"></script>
        <script src="../../../../../_static/sphinx_highlight.js"></script>
        <script src="https://unpkg.com/mermaid@9.4.0/dist/mermaid.min.js"></script>
        <script>mermaid.initialize({startOnLoad:true});</script>
    <script src="../../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../../index.html" class="icon icon-home">
            FarmVibes.AI
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User Guides &amp; Tutorials:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../QUICKSTART.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../AKS.html">Remote Cluster User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../CLIENT.html">FarmVibes.AI Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../WORKFLOWS.html">Workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../NOTEBOOK_LIST.html">Notebooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../REST_API.html">REST API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../CACHE.html">Data Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../SECRETS.html">Secrets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../TROUBLESHOOTING.html">Troubleshooting</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Main Components:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../code/vibe_core_client/client.html">FarmVibes.AI Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../code/vibe_core_data/index_data_types.html">Data Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../WORKFLOW_LIST.html">Workflow List</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Supporting Components:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../code/vibe_core_client/admag_client.html">Azure Data Manager for Agriculture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../code/vibe_core_client/datamodel.html">Data Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../code/vibe_core_client/additional_modules/filedownloader.html">File Downloader</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../code/vibe_core_client/additional_modules/fileutils.html">File Utils</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../code/vibe_core_client/additional_modules/logconfig.html">Logconfig</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../code/vibe_core_client/additional_modules/monitor.html">Monitor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../code/vibe_core_client/additional_modules/uri.html">URI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../code/vibe_core_client/additional_modules/utils.html">Utils</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">FarmVibes.AI</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">farm_ai/water/irrigation_classification</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../../_sources/docfiles/markdown/workflow_yaml/farm_ai/water/irrigation_classification.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="farm-ai-water-irrigation-classification">
<h1>farm_ai/water/irrigation_classification<a class="headerlink" href="#farm-ai-water-irrigation-classification" title="Permalink to this heading"></a></h1>
<p>Develops 30m pixel-wise irrigation probability map. The workflow retrieves LANDSAT 8 Surface Reflectance (SR) image tile and land surface elevation DEM data, and  runs four ops to compute irrigation probability map. The land surface elevation data source are 10m USGS DEM, or 30m Copernicus DEM; but Copernicus DEM is set as the default source in the workflow. Landsat Op compute_cloud_water_mask utilizes the qa_pixel band of image and NDVI index to generate mask of cloud cover and water bodies. Op compute_evaporative_fraction utilizes NDVI index, land surface temperature (LST), green and near infra-red bands, and DEM data to estimate evaporative flux (ETRF). Op compute_ngi_egi_layers utilizes NDVI index, ETRF estimates, green and near infra-red bands to generate NGI and EGI irrigation layers. Lastly op compute_irrigation_probability uses NGI and EGI layers along with LST band; and applies optimized logistic regression model to compute 30m pixel-wise irrigation probability map. The coeficients and intercept of the model were obtained beforehand using as ground-truth data from Nebraska state, USA for the year 2015.</p>
<div class="mermaid">
                graph TD
    inp1&gt;user_input]
    out1&gt;landsat_bands]
    out2&gt;ndvi]
    out3&gt;cloud_water_mask]
    out4&gt;dem]
    out5&gt;evaporative_fraction]
    out6&gt;ngi]
    out7&gt;egi]
    out8&gt;lst]
    out9&gt;irrigation_probability]
    tsk1{{landsat}}
    tsk2{{ndvi}}
    tsk3{{merge_geom}}
    tsk4{{merge_geom_time_range}}
    tsk5{{cloud_water_mask}}
    tsk6{{dem}}
    tsk7{{match_dem}}
    tsk8{{evaporative_fraction}}
    tsk9{{ngi_egi_layers}}
    tsk10{{irrigation_probability}}
    tsk1{{landsat}} -- raster/items --&gt; tsk3{{merge_geom}}
    tsk1{{landsat}} -- raster --&gt; tsk2{{ndvi}}
    tsk1{{landsat}} -- raster/landsat_raster --&gt; tsk5{{cloud_water_mask}}
    tsk1{{landsat}} -- raster/ref_rasters --&gt; tsk7{{match_dem}}
    tsk1{{landsat}} -- raster/landsat_raster --&gt; tsk8{{evaporative_fraction}}
    tsk1{{landsat}} -- raster/landsat_raster --&gt; tsk9{{ngi_egi_layers}}
    tsk1{{landsat}} -- raster/landsat_raster --&gt; tsk10{{irrigation_probability}}
    tsk2{{ndvi}} -- index/ndvi_raster --&gt; tsk5{{cloud_water_mask}}
    tsk2{{ndvi}} -- index/ndvi_raster --&gt; tsk8{{evaporative_fraction}}
    tsk2{{ndvi}} -- index/ndvi_raster --&gt; tsk9{{ngi_egi_layers}}
    tsk3{{merge_geom}} -- merged/geometry --&gt; tsk4{{merge_geom_time_range}}
    tsk4{{merge_geom_time_range}} -- merged/user_input --&gt; tsk6{{dem}}
    tsk6{{dem}} -- raster/rasters --&gt; tsk7{{match_dem}}
    tsk7{{match_dem}} -- match_rasters/dem_raster --&gt; tsk8{{evaporative_fraction}}
    tsk8{{evaporative_fraction}} -- evaporative_fraction --&gt; tsk9{{ngi_egi_layers}}
    tsk5{{cloud_water_mask}} -- cloud_water_mask/cloud_water_mask_raster --&gt; tsk8{{evaporative_fraction}}
    tsk5{{cloud_water_mask}} -- cloud_water_mask/cloud_water_mask_raster --&gt; tsk9{{ngi_egi_layers}}
    tsk5{{cloud_water_mask}} -- cloud_water_mask/cloud_water_mask_raster --&gt; tsk10{{irrigation_probability}}
    tsk9{{ngi_egi_layers}} -- ngi --&gt; tsk10{{irrigation_probability}}
    tsk9{{ngi_egi_layers}} -- egi --&gt; tsk10{{irrigation_probability}}
    tsk9{{ngi_egi_layers}} -- lst --&gt; tsk10{{irrigation_probability}}
    inp1&gt;user_input] -- user_input --&gt; tsk1{{landsat}}
    inp1&gt;user_input] -- time_range --&gt; tsk4{{merge_geom_time_range}}
    tsk1{{landsat}} -- raster --&gt; out1&gt;landsat_bands]
    tsk2{{ndvi}} -- index --&gt; out2&gt;ndvi]
    tsk5{{cloud_water_mask}} -- cloud_water_mask --&gt; out3&gt;cloud_water_mask]
    tsk7{{match_dem}} -- match_rasters --&gt; out4&gt;dem]
    tsk8{{evaporative_fraction}} -- evaporative_fraction --&gt; out5&gt;evaporative_fraction]
    tsk9{{ngi_egi_layers}} -- ngi --&gt; out6&gt;ngi]
    tsk9{{ngi_egi_layers}} -- egi --&gt; out7&gt;egi]
    tsk9{{ngi_egi_layers}} -- lst --&gt; out8&gt;lst]
    tsk10{{irrigation_probability}} -- irrigation_probability --&gt; out9&gt;irrigation_probability]
        </div><section id="sources">
<h2>Sources<a class="headerlink" href="#sources" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p><strong>user_input</strong>: Time range and geometry of interest.</p></li>
</ul>
</section>
<section id="sinks">
<h2>Sinks<a class="headerlink" href="#sinks" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p><strong>landsat_bands</strong>: Raster of Landsat bands.</p></li>
<li><p><strong>ndvi</strong>: NDVI raster.</p></li>
<li><p><strong>cloud_water_mask</strong>: Mask of cloud cover and water bodies.</p></li>
<li><p><strong>dem</strong>: DEM raster. Options are CopernicusDEM30 and USGS3DEP.</p></li>
<li><p><strong>evaporative_fraction</strong>: Raster with estimates of evaporative fraction flux.</p></li>
<li><p><strong>ngi</strong>: Raster of NGI irrigation layer.</p></li>
<li><p><strong>egi</strong>: Raster of EGI irrigation layer.</p></li>
<li><p><strong>lst</strong>: Raster of land surface temperature.</p></li>
<li><p><strong>irrigation_probability</strong>: Raster of irrigation probability map in 30m resolution.</p></li>
</ul>
</section>
<section id="parameters">
<h2>Parameters<a class="headerlink" href="#parameters" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p><strong>ndvi_threshold</strong>: NDVI index threshold value for masking water bodies.</p></li>
<li><p><strong>ndvi_hot_threshold</strong>: Maximum NDVI index threshold value for selecting hot pixel.</p></li>
<li><p><strong>coef_ngi</strong>: Coefficient of NGI layer in optimized logistic regression model.</p></li>
<li><p><strong>coef_egi</strong>: Coefficient of EGI layer in optimized logistic regression model.</p></li>
<li><p><strong>coef_lst</strong>: Coefficient of land surface temperature band in optimized logistic regression model.</p></li>
<li><p><strong>intercept</strong>: Intercept value of optimized logistic regression model.</p></li>
<li><p><strong>dem_resolution</strong>: Spatial resolution of the DEM. 10m and 30m are available.</p></li>
<li><p><strong>dem_provider</strong>: Provider of the DEM. “USGS3DEP” and “CopernicusDEM30” are available.</p></li>
<li><p><strong>pc_key</strong>: Optional Planetary Computer API key.</p></li>
</ul>
</section>
<section id="tasks">
<h2>Tasks<a class="headerlink" href="#tasks" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p><strong>landsat</strong>: Downloads and preprocesses LANDSAT tiles that intersect with the input geometry and time range.</p></li>
<li><p><strong>ndvi</strong>: Computes <code class="docutils literal notranslate"><span class="pre">index</span></code> over the input raster.</p></li>
<li><p><strong>merge_geom</strong>: Create item with merged geometry from item list.</p></li>
<li><p><strong>merge_geom_time_range</strong>: Create item that contains the geometry from one item and the time range from another.</p></li>
<li><p><strong>cloud_water_mask</strong>: Merges landsat cloud mask and NDVI-based mask to produce a cloud water mask.</p></li>
<li><p><strong>dem</strong>: Downloads digital elevation map tiles that intersect with the input geometry and time range.</p></li>
<li><p><strong>match_dem</strong>: Resamples input rasters to the reference rasters’ grid.</p></li>
<li><p><strong>evaporative_fraction</strong>: Computes evaporative fraction layer based on the percentile values of lst_dem (created by treating land surface temperature with dem) and ndvi layers. The source of constants used is “Senay, G.B.; Bohms, S.; Singh, R.K.; Gowda, P.H.; Velpuri, N.M.; Alemu, H.; Verdin, J.P. Operational Evapotranspiration Mapping Using Remote Sensing and Weather Datasets - A New Parameterization for the SSEB Approach. JAWRA J. Am. Water Resour. Assoc. 2013, 49, 577–591. The land surface elevation data source are 10m USGS DEM, and 30m Copernicus DEM; but Copernicus DEM is set as default source in the workflow.</p></li>
<li><p><strong>ngi_egi_layers</strong>: Computes NGI, EGI, and LST layers from landsat bands, ndvi layer, cloud water mask layer and evaporative fraction layer</p></li>
<li><p><strong>irrigation_probability</strong>: Computes irrigation probability values for each pixel in raster using optimized logistic regression model with ngi, egi, and lst rasters as input</p></li>
</ul>
</section>
<section id="workflow-yaml">
<h2>Workflow Yaml<a class="headerlink" href="#workflow-yaml" title="Permalink to this heading"></a></h2>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">irrigation_classification</span>
<span class="nt">sources</span><span class="p">:</span>
<span class="w">  </span><span class="nt">user_input</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">landsat.user_input</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">merge_geom_time_range.time_range</span>
<span class="nt">sinks</span><span class="p">:</span>
<span class="w">  </span><span class="nt">landsat_bands</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">landsat.raster</span>
<span class="w">  </span><span class="nt">ndvi</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ndvi.index</span>
<span class="w">  </span><span class="nt">cloud_water_mask</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cloud_water_mask.cloud_water_mask</span>
<span class="w">  </span><span class="nt">dem</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">match_dem.match_rasters</span>
<span class="w">  </span><span class="nt">evaporative_fraction</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">evaporative_fraction.evaporative_fraction</span>
<span class="w">  </span><span class="nt">ngi</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ngi_egi_layers.ngi</span>
<span class="w">  </span><span class="nt">egi</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ngi_egi_layers.egi</span>
<span class="w">  </span><span class="nt">lst</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ngi_egi_layers.lst</span>
<span class="w">  </span><span class="nt">irrigation_probability</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">irrigation_probability.irrigation_probability</span>
<span class="nt">parameters</span><span class="p">:</span>
<span class="w">  </span><span class="nt">ndvi_threshold</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0</span>
<span class="w">  </span><span class="nt">ndvi_hot_threshold</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.02</span>
<span class="w">  </span><span class="nt">coef_ngi</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-0.50604148</span>
<span class="w">  </span><span class="nt">coef_egi</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-0.93103156</span>
<span class="w">  </span><span class="nt">coef_lst</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-0.14612046</span>
<span class="w">  </span><span class="nt">intercept</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.99036986</span>
<span class="w">  </span><span class="nt">dem_resolution</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span>
<span class="w">  </span><span class="nt">dem_provider</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CopernicusDEM30</span>
<span class="w">  </span><span class="nt">pc_key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="nt">tasks</span><span class="p">:</span>
<span class="w">  </span><span class="nt">landsat</span><span class="p">:</span>
<span class="w">    </span><span class="nt">workflow</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">data_ingestion/landsat/preprocess_landsat</span>
<span class="w">    </span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">      </span><span class="nt">pc_key</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;@from(pc_key)&#39;</span>
<span class="w">  </span><span class="nt">ndvi</span><span class="p">:</span>
<span class="w">    </span><span class="nt">op</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">compute_index</span>
<span class="w">  </span><span class="nt">merge_geom</span><span class="p">:</span>
<span class="w">    </span><span class="nt">op</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">merge_geometries</span>
<span class="w">  </span><span class="nt">merge_geom_time_range</span><span class="p">:</span>
<span class="w">    </span><span class="nt">op</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">merge_geometry_and_time_range</span>
<span class="w">  </span><span class="nt">cloud_water_mask</span><span class="p">:</span>
<span class="w">    </span><span class="nt">op</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">compute_cloud_water_mask</span>
<span class="w">    </span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">      </span><span class="nt">ndvi_threshold</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;@from(ndvi_threshold)&#39;</span>
<span class="w">  </span><span class="nt">dem</span><span class="p">:</span>
<span class="w">    </span><span class="nt">workflow</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">data_ingestion/dem/download_dem</span>
<span class="w">    </span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">      </span><span class="nt">resolution</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;@from(dem_resolution)&#39;</span>
<span class="w">      </span><span class="nt">provider</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;@from(dem_provider)&#39;</span>
<span class="w">  </span><span class="nt">match_dem</span><span class="p">:</span>
<span class="w">    </span><span class="nt">workflow</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">data_processing/merge/match_merge_to_ref</span>
<span class="w">  </span><span class="nt">evaporative_fraction</span><span class="p">:</span>
<span class="w">    </span><span class="nt">op</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">compute_evaporative_fraction</span>
<span class="w">    </span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">      </span><span class="nt">ndvi_hot_threshold</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;@from(ndvi_hot_threshold)&#39;</span>
<span class="w">  </span><span class="nt">ngi_egi_layers</span><span class="p">:</span>
<span class="w">    </span><span class="nt">op</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">compute_ngi_egi_layers</span>
<span class="w">  </span><span class="nt">irrigation_probability</span><span class="p">:</span>
<span class="w">    </span><span class="nt">op</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">compute_irrigation_probability</span>
<span class="w">    </span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">      </span><span class="nt">coef_ngi</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;@from(coef_ngi)&#39;</span>
<span class="w">      </span><span class="nt">coef_egi</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;@from(coef_egi)&#39;</span>
<span class="w">      </span><span class="nt">coef_lst</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;@from(coef_lst)&#39;</span>
<span class="w">      </span><span class="nt">intercept</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;@from(intercept)&#39;</span>
<span class="nt">edges</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">origin</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">landsat.raster</span>
<span class="w">  </span><span class="nt">destination</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">merge_geom.items</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ndvi.raster</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cloud_water_mask.landsat_raster</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">match_dem.ref_rasters</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">evaporative_fraction.landsat_raster</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ngi_egi_layers.landsat_raster</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">irrigation_probability.landsat_raster</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">origin</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ndvi.index</span>
<span class="w">  </span><span class="nt">destination</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cloud_water_mask.ndvi_raster</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">evaporative_fraction.ndvi_raster</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ngi_egi_layers.ndvi_raster</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">origin</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">merge_geom.merged</span>
<span class="w">  </span><span class="nt">destination</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">merge_geom_time_range.geometry</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">origin</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">merge_geom_time_range.merged</span>
<span class="w">  </span><span class="nt">destination</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dem.user_input</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">origin</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dem.raster</span>
<span class="w">  </span><span class="nt">destination</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">match_dem.rasters</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">origin</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">match_dem.match_rasters</span>
<span class="w">  </span><span class="nt">destination</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">evaporative_fraction.dem_raster</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">origin</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">evaporative_fraction.evaporative_fraction</span>
<span class="w">  </span><span class="nt">destination</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ngi_egi_layers.evaporative_fraction</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">origin</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cloud_water_mask.cloud_water_mask</span>
<span class="w">  </span><span class="nt">destination</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">evaporative_fraction.cloud_water_mask_raster</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ngi_egi_layers.cloud_water_mask_raster</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">irrigation_probability.cloud_water_mask_raster</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">origin</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ngi_egi_layers.ngi</span>
<span class="w">  </span><span class="nt">destination</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">irrigation_probability.ngi</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">origin</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ngi_egi_layers.egi</span>
<span class="w">  </span><span class="nt">destination</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">irrigation_probability.egi</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">origin</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ngi_egi_layers.lst</span>
<span class="w">  </span><span class="nt">destination</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">irrigation_probability.lst</span>
<span class="nt">description</span><span class="p">:</span>
<span class="w">  </span><span class="nt">short_description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Develops 30m pixel-wise irrigation probability map.</span>
<span class="w">  </span><span class="nt">long_description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">The workflow retrieves LANDSAT 8 Surface Reflectance (SR) image</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">tile and land surface elevation DEM data, and  runs four ops to compute irrigation</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">probability map. The land surface elevation data source are 10m USGS DEM, or 30m</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">Copernicus DEM; but Copernicus DEM is set as the default source in the workflow.</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">Landsat Op compute_cloud_water_mask utilizes the qa_pixel band of image and NDVI</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">index to generate mask of cloud cover and water bodies. Op compute_evaporative_fraction</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">utilizes NDVI index, land surface temperature (LST), green and near infra-red</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">bands, and DEM data to estimate evaporative flux (ETRF). Op compute_ngi_egi_layers</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">utilizes NDVI index, ETRF estimates, green and near infra-red bands to generate</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">NGI and EGI irrigation layers. Lastly op compute_irrigation_probability uses NGI</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">and EGI layers along with LST band; and applies optimized logistic regression</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">model to compute 30m pixel-wise irrigation probability map. The coeficients and</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">intercept of the model were obtained beforehand using as ground-truth data from</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">Nebraska state, USA for the year 2015.</span>
<span class="w">  </span><span class="nt">sources</span><span class="p">:</span>
<span class="w">    </span><span class="nt">user_input</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Time range and geometry of interest.</span>
<span class="w">  </span><span class="nt">sinks</span><span class="p">:</span>
<span class="w">    </span><span class="nt">landsat_bands</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Raster of Landsat bands.</span>
<span class="w">    </span><span class="nt">ndvi</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NDVI raster.</span>
<span class="w">    </span><span class="nt">cloud_water_mask</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Mask of cloud cover and water bodies.</span>
<span class="w">    </span><span class="nt">dem</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DEM raster. Options are CopernicusDEM30 and USGS3DEP.</span>
<span class="w">    </span><span class="nt">evaporative_fraction</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Raster with estimates of evaporative fraction flux.</span>
<span class="w">    </span><span class="nt">ngi</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Raster of NGI irrigation layer.</span>
<span class="w">    </span><span class="nt">egi</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Raster of EGI irrigation layer.</span>
<span class="w">    </span><span class="nt">lst</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Raster of land surface temperature.</span>
<span class="w">    </span><span class="nt">irrigation_probability</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Raster of irrigation probability map in 30m resolution.</span>
<span class="w">  </span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">    </span><span class="nt">ndvi_threshold</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NDVI index threshold value for masking water bodies.</span>
<span class="w">    </span><span class="nt">ndvi_hot_threshold</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Maximum NDVI index threshold value for selecting hot pixel.</span>
<span class="w">    </span><span class="nt">coef_ngi</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Coefficient of NGI layer in optimized logistic regression model.</span>
<span class="w">    </span><span class="nt">coef_egi</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Coefficient of EGI layer in optimized logistic regression model.</span>
<span class="w">    </span><span class="nt">coef_lst</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Coefficient of land surface temperature band in optimized logistic regression</span>
<span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">model.</span>
<span class="w">    </span><span class="nt">intercept</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Intercept value of optimized logistic regression model.</span>
<span class="w">    </span><span class="nt">pc_key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Optional Planetary Computer API key.</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Microsoft.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>