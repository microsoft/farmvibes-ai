name: download_gedi_rh100
sources:
  user_input:
    - download.user_input
    - extract.roi
sinks:
  rh100: extract.rh100
parameters:
  earthdata_token:
  check_quality:
tasks:
  download:
    workflow: data_ingestion/gedi/download_gedi
    parameters:
      earthdata_token: "@from(earthdata_token)"
  extract:
    op: extract_gedi_rh100
    parameters:
      check_quality: "@from(check_quality)"
edges:
  - origin: download.product
    destination:
      - extract.gedi_product
description:
  short_description: Downloads L2B GEDI products and extracts RH100 variables.
  long_description:
    The workflow will download the products for the input region and time range, and then extract
    RH100 variables for each of the beam shots. Each value is geolocated according to the lowest
    mode latitude and longitude values.
  sources:
    user_input: Time range and geometry of interest.
  sinks:
    rh100: Points in EPSG:4326 with their associated RH100 values.
  parameters:
    check_quality: Whether to filter points according to the quality flag.
