name: alos_forest_extent_download_merge
sources:
  user_input:
    - alos_forest_extent_download.user_input
sinks:
  merged_raster: merge.raster
  categorical_raster: alos_forest_extent_download.downloaded_product
parameters:
  pc_key:
tasks:
  alos_forest_extent_download:
    workflow: data_ingestion/alos/alos_forest_extent_download
    parameters:
      pc_key: "@from(pc_key)"
  group_rasters_by_time:
    op: group_rasters_by_time
    parameters:
      criterion: "year"
  merge:
    op: merge_rasters
edges:
  - origin: alos_forest_extent_download.downloaded_product
    destination:
      - group_rasters_by_time.rasters
  - origin: group_rasters_by_time.raster_groups
    destination:
      - merge.raster_sequence
description:
  short_description: 
    Downloads Advanced Land Observing Satellite (ALOS) forest/non-forest classification map and merges it into a single raster.
  long_description:
    The workflow lists the ALOS forest/non-forest classification products that intersect with the input 
    geometry and time range (available range 2015-2020), and downloads the filtered products. The 
    workflow processes the downloaded products and merge them into a single raster.
  sources:
    user_input: Geometry of interest for which to download the ALOS forest/non-forest classification map.
  sinks:
    merged_raster: ALOS forest/non-forest classification products converted to raster and merged.
    categorical_raster: ALOS forest/non-forest classification products that intersect with the input geometry & time range.
  parameters:
    pc_key: Planetary computer API key.